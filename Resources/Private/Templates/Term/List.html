{namespace ecomvh=Ecom\Ecomglossary\ViewHelpers}
<f:layout name="Default" />

<f:section name="main">
	<f:flashMessages renderMode="div" />

	<div class="tx_ecomglossary-list-view">
		<div class="tx_ecomglossary-header">
			<f:form id="tx_ecomglossary-searchform" method="POST" noCacheHash="true" noCache="true">
				<div>
					<f:form.textfield type="search" name="searchTerm" id="tx_ecomglossary-searchTerm" placeholder="{f:translate(key: 'search.placeholder')}" value="{searchTerm}"/>
					<f:form.submit class="btn submit" value="Search" />
				</div>
			</f:form>
			<f:if condition="{letterList}">
				<strong><f:translate key="filterTerms" /></strong>
				<div class="tx_ecomglossary-letter-navigation" role="navigation">
					<f:for each="{letterList}" as="result" key="letter">
						<f:if condition="{0: result, 1:settings.showEmptyLetters} == {0: 'empty', 1: '1'}">
							<f:then>
								<span class="tx_ecomglossary-empty-letter">{letter}</span>
							</f:then>
							<f:else>
								<f:link.action action="list" class="{f:if(condition: '{filterByLetter} == {letter}', then: 'active')}" arguments="{filterByLetter:letter}" title="{f:translate(key: 'filterBy')} {letter}" noCacheHash="true" noCache="true">{letter}</f:link.action>
							</f:else>
						</f:if>
					</f:for>
					<div class="tx_ecomglossary-view-all-btn">
						<f:link.action action="list" class="btn" noCacheHash="true" noCache="true"><f:translate key="showAllEntries" /></f:link.action>
					</div>
				</div>
			</f:if>
		</div>
		<hr>
		<f:if condition="{terms->f:count()} > 0">
			<f:then>
				<div class="tx_ecomglossary-term-listing">
					<f:if condition="{0: filterByLetter} != {0: ''}">
						<strong><f:translate key="filterBy" /> {filterByLetter}</strong>
					</f:if>
					<f:widget.paginate objects="{terms}" as="paginatedTerms" configuration="{itemsPerPage: settings.termsPerPage, insertAbove: 1, insertBelow: 1}">
						<ul class="tx_ecomglossary-term-listing-terms">
							<f:for each="{paginatedTerms}" as="term">
								<li>
									<h3>
										<f:if condition="{term.externalLink}">
											<f:then>
												<ecomvh:link.typolink configuration="{parameter: term.externalLink, title: '{term.title}'}">{term.title} </ecomvh:link.typolink> <span class="tx_ecomglossary-term-external-desc"><f:translate key="tx_ecomglossary_domain_model_term.external_link" /> <i class="fa fa-external-link"></i></span>
											</f:then>
											<f:else>
												<f:link.action action="show" arguments="{term : term}">{term.title}</f:link.action>
											</f:else>
										</f:if>
										<f:if condition="{term.termType}">
											<br>
											<small><strong><f:translate key="tx_ecomglossary_domain_model_term.term_type" />: </strong><f:translate key="tx_ecomglossary_domain_model_term.term_type.{term.termType}" /></small>
										</f:if>
									</h3>
									<f:if condition="{term.shortDescription}">
										<p class="tx_ecomglossary-shortdesc">{term.shortDescription -> f:format.crop(maxCharacters: settings.shortDescMaxChars, append: settings.shortDescAppend)}</p>
									</f:if>
								</li>
							</f:for>
						</ul>
					</f:widget.paginate>
				</div>
			</f:then>
			<f:else>
				<f:link.action action="list" class="morelink-btn" noCache="true" noCacheHash="true"><i class="fa fa-align-justify"></i> <f:translate key="showAllEntries" /></f:link.action>
			</f:else>
		</f:if>
	</div>

</f:section>